!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(b,c,d,e,f,g){function h(){d.cancel(j),g.complete(),l=0,k=0}function i(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d?void 0!==d.get(b.url):!1;return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var j,k=0,l=0,m=g.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||i(a)||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===k&&(j=d(function(){g.start()},m)),k++,g.set(l/k)),a},response:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),a):(f.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),a)},responseError:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),b.reject(a)):(f.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),b.reject(a))}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){k||(k=a.get("$animate"));var e=b.find(n).eq(0);c.cancel(m),r||(d.$broadcast("cfpLoadingBar:started"),r=!0,u&&k.enter(o,e,angular.element(e[0].lastChild)),t&&k.enter(q,e,angular.element(e[0].lastChild)),f(v))}function f(a){if(r){var b=100*a+"%";p.css("width",b),s=a,c.cancel(l),l=c(function(){g()},250)}}function g(){if(!(h()>=1)){var a=0,b=h();a=b>=0&&.25>b?(3*Math.random()+3)/100:b>=.25&&.65>b?3*Math.random()/100:b>=.65&&.9>b?2*Math.random()/100:b>=.9&&.99>b?.005:0;var c=h()+a;f(c)}}function h(){return s}function i(){s=0,r=!1}function j(){k||(k=a.get("$animate")),d.$broadcast("cfpLoadingBar:completed"),f(1),c.cancel(m),m=c(function(){var a=k.leave(o,i);a&&a.then&&a.then(i),k.leave(q)},500)}var k,l,m,n=this.parentSelector,o=angular.element(this.loadingBarTemplate),p=o.find("div").eq(0),q=angular.element(this.spinnerTemplate),r=!1,s=0,t=this.includeSpinner,u=this.includeBar,v=this.startSize;return{start:e,set:f,status:h,inc:g,complete:j,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),angular.module("outingzApp",["chieffancypants.loadingBar","ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$httpProvider",function(a,b){a.when("/",{title:"Dashboard here",templateUrl:"views/dashboard.html",controller:"MerchantCtrl"}).when("/merchant",{title:"Settings, Business Setup",templateUrl:"views/merchant.html",controller:"MerchantCtrl",resolve:{authenticated:["$q","$location","UserService",function(a,b,c){var d=a.defer();return c.isAuthenticated()?d.resolve():b.path("/login"),d.promise}]}}).when("/location",{title:"Settings, Business Setup",templateUrl:"views/location.html",controller:"MerchantCtrl",resolve:{authenticated:["$q","$location","UserService",function(a,b,c){var d=a.defer();return c.isAuthenticated()?d.resolve():b.path("/login"),d.promise}]}}).when("/activity_service",{title:"Add Activity",templateUrl:"views/activity_service.html",controller:"ServiceCtrl",resolve:{authenticated:["$q","$location","UserService",function(a,b,c){var d=a.defer();return c.isAuthenticated()?d.resolve():b.path("/login"),d.promise}]}}).when("/reset_password/:resetPassword/:key/:username/:token*",{title:"Reset your password",templateUrl:"views/reset-password.html",controller:"userCtrl"}).when("/login",{title:"Login",templateUrl:"views/login.html",controller:"userCtrl"}).when("/logout",{templateUrl:"views/login.html",controller:"userCtrl"}).when("/register",{title:"Invite Business",templateUrl:"views/register.html",controller:"userCtrl"}).when("/buildInfo",{title:"Your build info",templateUrl:"views/build.html",controller:"buildCtrl"}).otherwise({redirectTo:"/"}),b.interceptors.push(["$q","$window","$location",function(a){return{request:function(a){return a},responseError:function(b){return a.reject(b)},response:function(a){return a}}}])}]).directive("hoverBgImage",function(){return{link:function(a,b,c){b.bind("mouseenter",function(){this.src=c.hoverBgImage}),b.bind("mouseleave",function(){this.src=c.data})}}}).run(["$location","$rootScope",function(a,b){b.$on("$routeChangeSuccess",function(a,c){b.title=c.$$route.title})}]),angular.module("outingzApp").controller("MerchantCtrl",["$scope","MerchantService","$q","$http","$routeParams","$location","UserService",function(a,b,c,d,e,f){a.image_bussiness="images/business_img.png",a.image_activity="images/activity_img.png",a.image_membership="images/membership_img.png",a.image_social="images/social_img.png",a.image_payment="images/payment_img.png",a.image_staff="images/staff_img.png",a.merchant={},a.success="",a.error="",a.create_merchant=function(c,d){d?b.add_merchant(c).then(function(){a.success="Your Business setup sucessfully"},function(){a.error="Error in creating your bussiness!"}):a.error="Error in creating your bussiness!"},a.location={},a.locations=[],a.add_merchant_location=function(c){c.address.state="",c.address.country="",c.address.line2="",b.add_merchant_location(c).then(function(){a.locations.push(c),a.success="Your location added sucessfully"},function(){a.error="Error in saving your location!"})},"/location"==f.url()&&b.get_merchant_locations().then(function(b){a.locations=b.location},function(a){console.log("There is an error"+a)}),a.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]}]),angular.module("outingzApp").controller("ServiceCtrl",["$scope","ActivityService","$q","$http",function(a,b){a.activity_service={},a.select_type=function(a){"camp"==a?document.getElementById(a).classList.contains("active")?(document.getElementById(a).classList.remove("active"),document.getElementById("service").classList.contains("active")||document.getElementById("service").classList.add("active")):(document.getElementById(a).classList.add("active"),document.getElementById("service").classList.contains("active")&&document.getElementById("service").classList.remove("active")):document.getElementById(a).classList.contains("active")?(document.getElementById(a).classList.remove("active"),document.getElementById("camp").classList.contains("active")||document.getElementById("camp").classList.add("active")):(document.getElementById(a).classList.add("active"),document.getElementById("camp").classList.contains("active")&&document.getElementById("camp").classList.remove("active"))},a.add_activity_service=function(c){var c={};c.offering={},c.offering.name=a.name,c.offering.duration=a.duration,c.offering.unit=a.unit,c.offering.basePrice=a.basePrice;var d=document.querySelector(".active").id;c.offering.type=a.type,b.add_activity_service(c,d).then(function(){console.log("Activity service added successfully")},function(a){console.log("There is an error"+a)})},a.register=function(){b.register().then(function(){console.log("Activity service added successfully")},function(a){console.log("There is an error"+a)})}}]),angular.module("outingzApp").controller("userCtrl",["$scope","$q","$http","$routeParams","$location","$window","UserService",function(a,b,c,d,e,f,g){a.password="",a.success="",a.error="";a.register=function(b){b.id="id"+Math.floor(9999999999*Math.random()+1),g.register(b).then(function(b){console.log(JSON.stringify(b)),500==b.status?a.error="Error in registeration":b.id?(a.success="An Invitation email has been sent to the user to generate the password and activate account",window.setTimeout(function(){$(".alert-message").alert("close")},2e3),a.merchant={}):a.error="Error while sending Invitation!"},function(a){console.log("There is an error"+a)})},a.login=function(){var b={};b.username=a.username,b.password=a.password,f.localStorage.token="varun",f.localStorage.key="test",e.url("/merchant")},a.reset_password=function(){var b={};b.user="varunprashar5@gmail.com",b.key="408829f6-6505-4348-b180-&/c5531298-92b9-4448-9916-999e960d74c4",b.password=a.password,g.reset_password(b).then(function(){a.success="Your password reset successfully"},function(){a.error="Error while resetting your password!"})}}]).controller("NavbarCtrl",["$scope","$q","$http","$routeParams","$location","$window","UserService",function(a,b,c,d,e,f,g){a.isAuthenticated=function(){return g.isAuthenticated()},a.check=function(){return"/login"!=e.path()?!0:!1},a.logout=function(){delete f.localStorage.token,delete f.localStorage.key,e.url("/login")}}]),angular.module("outingzApp").controller("buildCtrl",["$scope","$q","$http","$routeParams","$location","$window","UserService",function(a,b,c,d,e){c.get("views/build.json").success(function(b){a.build=b}),a.getImg=function(){return"/login"==e.path()?!0:!1}}]),angular.module("outingzApp").factory("MerchantService",["$http","$q",function(a,b){return{add_merchant:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/merchants",c).success(function(a){d.resolve(a)}).error(function(){d.reject("An error occured while fetching items")}),d.promise},add_merchant_location:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/merchants/098150df-d65f-4577-b4ce-474ecced5673/locations",c).success(function(a){d.resolve(a)}).error(function(){d.reject("An error occured while fetching items")}),d.promise},get_merchant_locations:function(){var c=b.defer();return a.get("https://api.outingz.com/outingz/merchants/098150df-d65f-4577-b4ce-474ecced5673/locations").success(function(a){c.resolve(a)}).error(function(){c.reject("An error occured while fetching items")}),c.promise}}}]),angular.module("outingzApp").factory("ActivityService",["$http","$q",function(a,b){return{add_activity_service:function(c,d){var e=b.defer(),f="";return f="service"==d?"https://api.outingz.com/outingz/merchants/098150df-d65f-4577-b4ce-474ecced5673/services":"https://api.outingz.com/outingz/merchants/098150df-d65f-4577-b4ce-474ecced5673/classes",a.post(f,c).success(function(a){e.resolve(a)}).error(function(){e.reject("An error occured while fetching items")}),e.promise},register:function(){var c=b.defer();return obj={},obj.id="id5941",obj.name="varun",obj.shortName="vipy",obj.primaryUserName="varunprashar5@gmail.com",obj.dba="vhelo",obj.companyUrl="companyUrl",a.post("https://api.outingz.com/outingz/registration",obj).success(function(a){c.resolve(a)}).error(function(){c.reject("An error occured while fetching items")}),c.promise}}}]),angular.module("outingzApp").factory("UserService",["$http","$q","$window","$location",function(a,b,c,d){return{reset_password:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/authenticate/resetLogin",c).success(function(a){d.resolve(a)}).error(function(){d.reject("An error occured while fetching items")}),d.promise},login:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/authenticate",c).success(function(a,b){d.resolve({data:a,status:b})}).error(function(){d.reject("An error occured while fetching items")}),d.promise},register:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/registration",c).success(function(a){d.resolve(a)}).error(function(){d.reject("An error occured while fetching items")}),d.promise},isAuthenticated:function(){var a=c.localStorage.token,b=c.localStorage.key;return a&&b?!0:!1},bg:function(){if("/login"==d.path()){var a=angular.element(document.querySelector("#contt"));a.wrap('<div id="login_sec"></div>')}else{var a=angular.element(document.querySelector("#login_sec"));a.unwrap()}}}}]),angular.module("outingzApp").directive("validPasswordC",function(){return{require:"ngModel",scope:{otherModelValue:"=validPasswordC"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b==a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}});