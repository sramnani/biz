"use strict";angular.module("outingzApp",["chieffancypants.loadingBar","ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","ui.utils","ui.bootstrap","ngAside"]).config(["$routeProvider","$httpProvider",function($routeProvider,$httpProvider){$routeProvider.when("/",{title:"Dashboard here",templateUrl:"views/dashboard.html",controller:"MerchantCtrl",resolve:{authenticated:["$q","$location","UserService",function($q,$location,UserService){var deferred=$q.defer();return UserService.isAuthenticated()?deferred.resolve():$location.path("/login"),deferred.promise}]}}).when("/merchant/:resetMessage",{title:"Settings, Business Setup",templateUrl:"views/merchant.html",controller:"MerchantCtrl",resolve:{authenticated:["$q","$location","UserService",function($q,$location,UserService){var deferred=$q.defer();return UserService.isAuthenticated()?deferred.resolve():$location.path("/login"),deferred.promise}]}}).when("/merchant",{title:"Settings, Business Setup",templateUrl:"views/merchant.html",controller:"MerchantCtrl",resolve:{authenticated:["$q","$location","UserService",function($q,$location,UserService){var deferred=$q.defer();return UserService.isAuthenticated()?deferred.resolve():$location.path("/login"),deferred.promise}]}}).when("/location",{title:"Settings, Business Setup",templateUrl:"views/location.html",controller:"MerchantCtrl",resolve:{authenticated:["$q","$location","UserService",function($q,$location,UserService){var deferred=$q.defer();return UserService.isAuthenticated()?deferred.resolve():$location.path("/login"),deferred.promise}]}}).when("/activity_service",{title:"Add Activity",templateUrl:"views/activity_service.html",controller:"ServiceCtrl",resolve:{authenticated:["$q","$location","UserService",function($q,$location,UserService){var deferred=$q.defer();return UserService.isAuthenticated()?deferred.resolve():$location.path("/login"),deferred.promise}]}}).when("/activity_class",{title:"Add Activity",templateUrl:"views/activity_class.html",controller:"ClassCtrl",resolve:{authenticated:["$q","$location","UserService",function($q,$location,UserService){var deferred=$q.defer();return UserService.isAuthenticated()?deferred.resolve():$location.path("/login"),deferred.promise}]}}).when("/customer",{title:"Add Customer",templateUrl:"views/customer.html",controller:"CustomerCtrl",resolve:{authenticated:["$q","$location","UserService",function($q,$location,UserService){var deferred=$q.defer();return UserService.isAuthenticated()?deferred.resolve():$location.path("/login"),deferred.promise}]}}).when("/reset_password/:resetPassword/:key/:username/:token*",{title:"Reset your password",templateUrl:"views/reset-password.html",controller:"userCtrl"}).when("/login",{title:"Login",templateUrl:"views/login.html",controller:"userCtrl"}).when("/logout",{templateUrl:"views/login.html",controller:"userCtrl"}).when("/register",{title:"Invite Business",templateUrl:"views/register.html",controller:"userCtrl"}).when("/buildInfo",{title:"Your build info",templateUrl:"views/build.html",controller:"buildCtrl"}).when("/test",{title:"Test here",templateUrl:"views/test.html",controller:"simpleCtrl"}).when("/forgotPassword",{title:"Test here",templateUrl:"views/test.html",controller:"userCtrl"}).otherwise({redirectTo:"/"}),$httpProvider.interceptors.push(["$q","$window","$location",function($q,$window){return{request:function(config){var token=$window.localStorage.token,key="e76a871c-8dde-4981-9105-5f4096eb3ab8",header={key:key,token:token};return token?config.headers.Authorization=header:console.log("No header found"),config},responseError:function(response){return $q.reject(response)},response:function(response){return response}}}])}]).directive("hoverBgImage",function(){return{link:function(scope,elm,attrs){elm.bind("mouseenter",function(){this.src=attrs.hoverBgImage}),elm.bind("mouseleave",function(){this.src=attrs.data})}}}).directive("onlyDigits",function(){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ngModel){ngModel&&ngModel.$parsers.unshift(function(inputValue){var digits=inputValue.replace(/\D/g,"");return attrs.time?((1>digits||digits>12)&&(digits=1),""==digits&&(digits=1),ngModel.$viewValue=digits):ngModel.$viewValue=digits,ngModel.$render(),digits})}}}).run(["$location","$rootScope","$http",function($location,$rootScope){$rootScope.$on("$routeChangeSuccess",function(event,current){$rootScope.title=current.$$route.title})}]),angular.module("outingzApp").controller("MerchantCtrl",["$scope","MerchantService","$q","$http","$routeParams","$location","$timeout","UserService",function($scope,MerchantService,$q,$http,$routeParams,$location,$timeout){$scope.image_bussiness="images/business_img.png",$scope.image_activity="images/activity_img.png",$scope.image_membership="images/membership_img.png",$scope.image_social="images/social_img.png",$scope.image_payment="images/payment_img.png",$scope.image_staff="images/staff_img.png",$scope.msg=!1,$routeParams.resetMessage?($scope.msg=!0,$scope.Reset_message="Password reset successfully"):($scope.msg=!1,$scope.Reset_message=$routeParams.resetMessage),$scope.merchant={},$scope.success="",$scope.error="",$scope.location={},$scope.location.address={},$scope.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],$scope.countries=["USA"],MerchantService.get_merchat().then(function(data){$scope.merchant=data},function(){$scope.error="Error in creating your bussiness!"}),$scope.create_merchant=function(merchant,isvalid){isvalid?($scope.location.locationName="Primary",merchant.locations={},merchant.locations.location=[],merchant.locations.location.push($scope.location),$scope.merchant.id="e76a871c-8dde-4981-9105-5f4096eb3ab8",MerchantService.add_merchant(merchant).then(function(){$scope.success="Your Business setup sucessfully",$timeout(function(){$location.url("/location")},2e3)},function(){$scope.error="Error in creating your bussiness!"})):($scope.showValidation=!0,$scope.error="Error in creating your bussiness!",$timeout(function(){$scope.error=!1,$scope.success=!1},3e3))},$scope.location={},$scope.locations_data=[],$scope.location.address={},$scope.location.locationSchedule=[],$scope.add_merchant_location=function(locations,isvalid){isvalid?(locations.address.country="Secondary",locations.address.line2="",angular.forEach($scope.locationSchedule,function(value){$scope.location.locationSchedule.push(value)}),MerchantService.add_merchant_location(locations).then(function(){$scope.locations_data.push(locations),$scope.location={},$scope.location.address={},$scope.success="Your location added sucessfully"},function(){$scope.error="Error in saving your location!"})):($scope.showValidation=!0,$scope.error="Error in Adding your location!",$timeout(function(){$scope.error=!1,$scope.success=!1},3e3))},"/location"===$location.url()&&MerchantService.get_merchant_locations().then(function(data){$scope.locations_data=data.location},function(error){console.log("There is an error"+error)})}]),angular.module("outingzApp").controller("ServiceCtrl",["$scope","ActivityService","$q","$http","$location",function($scope,ActivityService,$q,$http,$location){$scope.activity_service={},$scope.select_type=function(obj){$location.url("service"==obj?"/activity_service":"/activity_class")},$scope.add_activity_service=function(activity_service){var activity_service={};activity_service.offering={},activity_service.offering.name=$scope.name,activity_service.offering.duration=$scope.duration,activity_service.offering.unit=$scope.unit,activity_service.offering.basePrice=$scope.basePrice;var activity_type=document.querySelector(".active").id;activity_service.offering.type=$scope.type,ActivityService.add_activity_service(activity_service,activity_type).then(function(){console.log("Activity service added successfully")},function(error){console.log("There is an error"+error)})}}]),angular.module("outingzApp").controller("ClassCtrl",["$scope","ActivityService","$q","$http","$location",function($scope,ActivityService,$q,$http,$location){$scope.select_type=function(obj){$location.url("service"==obj?"/activity_service":"/activity_class")}}]),angular.module("outingzApp").controller("userCtrl",["$scope","$q","$http","$routeParams","$location","$window","UserService",function($scope,$q,$http,$routeParams,$location,$window,UserService){$scope.password="",$scope.success="",$scope.error="";$scope.register=function(registerObj){registerObj.id="id"+Math.floor(9999999999*Math.random()+1),UserService.register(registerObj).then(function(data){console.log(JSON.stringify(data)),500==data.status?$scope.error="Error in registeration":data.id?($scope.success="An Invitation email has been sent to the user to generate the password and activate account",window.setTimeout(function(){$(".alert-message").alert("close")},2e3),$scope.merchant={}):$scope.error="Error while sending Invitation!"},function(error){console.log("There is an error"+error)})},$scope.login=function(){var loginObj={};loginObj.username=$scope.username,loginObj.password=$scope.password,UserService.login(loginObj).then(function(data){console.log(JSON.stringify(data)),500==data.status?$scope.error="Wrong username & password":($window.localStorage.token=data.data.token,$window.localStorage.key=data.data.key,$location.url("/merchant"))},function(error){console.log("There is an error"+error)})},$scope.username="",$scope.username=$routeParams.username,$scope.reset_password=function(){var reset_obj={};reset_obj.user=$routeParams.username,reset_obj.key=$routeParams.key,reset_obj.password=$scope.password,UserService.reset_password(reset_obj).then(function(){var loginObj={};loginObj.username=$routeParams.username,loginObj.password=$scope.password,UserService.login(loginObj).then(function(data){console.log(JSON.stringify(data)),500==data.status?$scope.error="Wrong username & password":($window.localStorage.token=data.data.token,$window.localStorage.key=data.data.key,$scope.password="",$scope.confirmPassword="",$location.url("/merchant/reset"))})},function(){$scope.error="Error while resetting your password!"})}}]).controller("NavbarCtrl",["$scope","$q","$http","$routeParams","$location","$window","UserService",function($scope,$q,$http,$routeParams,$location,$window,UserService){$scope.isAuthenticated=function(){return UserService.isAuthenticated()},$scope.check=function(){return"/login"!=$location.path()?!0:!1},$scope.logout=function(){delete $window.localStorage.token,delete $window.localStorage.key,$location.url("/login")}}]),angular.module("outingzApp").controller("buildCtrl",["$scope","$q","$http","$routeParams","$location","$window","UserService",function($scope,$q,$http,$routeParams,$location){$http.get("views/build.json").success(function(data){$scope.build=data}),$scope.getImg=function(){return"/login"==$location.path()?!0:!1}}]),angular.module("outingzApp").controller("CustomerCtrl",["$scope","MerchantService","$q","$http","$routeParams","$location","$timeout","$aside","UserService",function($scope,MerchantService,$q,$http,$routeParams,$location,$timeout,$aside){$scope.openAside=function(position){$aside.open({templateUrl:"../../views/aside.html",placement:position,backdrop:!0,controller:function($scope,$modalInstance){$scope.ok=function(e){$modalInstance.close(),e.stopPropagation()},$scope.cancel=function(e){$modalInstance.dismiss(),e.stopPropagation()}}})}}]),angular.module("outingzApp").controller("simpleCtrl",["$scope",function($scope){$scope.setAddress=function(type,zip){console.log("Type: "+type+" "+zip)},$scope.copyAddress=function(){$scope.shippingZip=$scope.billingZip}}]),angular.module("outingzApp").factory("MerchantService",["$http","$q",function($http,$q){return{add_merchant:function(merchantObj){var deferred=$q.defer();return $http.post("https://api.outingz.com/outingz/merchants",merchantObj).success(function(data){deferred.resolve(data)}).error(function(){deferred.reject("An error occured while fetching items")}),deferred.promise},add_merchant_location:function(locationObj){var deferred=$q.defer();return $http.post("https://api.outingz.com/outingz/merchants/cfc78469-69d9-4004-9377-e9310ee053df/locations",locationObj).success(function(data){deferred.resolve(data)}).error(function(){deferred.reject("An error occured while fetching items")}),deferred.promise},get_merchant_locations:function(){var deferred=$q.defer();return $http.get("https://api.outingz.com/outingz/merchants/cfc78469-69d9-4004-9377-e9310ee053df/locations").success(function(data){deferred.resolve(data)}).error(function(){deferred.reject("An error occured while fetching items")}),deferred.promise},get_merchat:function(){var deferred=$q.defer();return $http.get("https://api.outingz.com/outingz/merchants/e76a871c-8dde-4981-9105-5f4096eb3ab8").success(function(data){deferred.resolve(data)}).error(function(){deferred.reject("An error occured while fetching items")}),deferred.promise}}}]),angular.module("outingzApp").factory("ActivityService",["$http","$q",function($http,$q){return{add_activity_service:function(activity_service,activity_type){var deferred=$q.defer(),link="";return link="service"==activity_type?"https://api.outingz.com/outingz/merchants/098150df-d65f-4577-b4ce-474ecced5673/services":"https://api.outingz.com/outingz/merchants/098150df-d65f-4577-b4ce-474ecced5673/classes",$http.post(link,activity_service).success(function(data){deferred.resolve(data)}).error(function(){deferred.reject("An error occured while fetching items")}),deferred.promise},register:function(){var deferred=$q.defer();return obj={},obj.id="id5941",obj.name="varun",obj.shortName="vipy",obj.primaryUserName="varunprashar5@gmail.com",obj.dba="vhelo",obj.companyUrl="companyUrl",$http.post("https://api.outingz.com/outingz/registration",obj).success(function(data){deferred.resolve(data)}).error(function(){deferred.reject("An error occured while fetching items")}),deferred.promise}}}]),angular.module("outingzApp").factory("UserService",["$http","$q","$window","$location",function($http,$q,$window){return{reset_password:function(reset_obj){var deferred=$q.defer();return $http.post("https://api.outingz.com/outingz/authenticate/resetLogin",reset_obj).success(function(data){deferred.resolve(data)}).error(function(){deferred.reject("An error occured while fetching items")}),deferred.promise},login:function(loginObj){var deferred=$q.defer();return $http.post("https://api.outingz.com/outingz/authenticate",loginObj).success(function(data,status){deferred.resolve({data:data,status:status})}).error(function(){deferred.reject("An error occured while fetching items")}),deferred.promise},register:function(registerObj){var deferred=$q.defer();return $http.post("https://api.outingz.com/outingz/registration",registerObj).success(function(data){deferred.resolve(data)}).error(function(){deferred.reject("An error occured while fetching items")}),deferred.promise},isAuthenticated:function(){var token=$window.localStorage.token,key=$window.localStorage.key;return token&&key?!0:!1}}}]),angular.module("outingzApp").directive("validPasswordC",function(){return{require:"ngModel",scope:{otherModelValue:"=validPasswordC"},link:function(scope,element,attributes,ngModel){ngModel.$validators.compareTo=function(modelValue){return modelValue==scope.otherModelValue},scope.$watch("otherModelValue",function(){ngModel.$validate()})}}}),angular.module("outingzApp").directive("timePick",function(){return{restrict:"E",templateUrl:"../../views/timePicker.html",link:function(scope){scope.error_directive="",scope.locationSchedule=[];{var locations=[];angular.element(document.querySelector(".timerpopup"))}scope.showPopover=!1,scope.flag=!1,scope.from=9,scope.to=5,scope.period=["AM","PM"],scope.from_type=scope.period[0],scope.to_type=scope.period[1],scope.disb=function(day){var myEl=angular.element(document.querySelector(".timerpopup"));return myEl.attr("day")&&myEl.attr("day")==day?!1:myEl.attr("day")?!0:void 0},scope.all_days=function(){scope.all},scope.current_day="",scope.showPop=function($event,pos,day){scope.error_directive="";var checkbox=$event.target;switch(day){case"mon":scope.current_day="Monday";break;case"tue":scope.current_day="Tuesday";break;case"wed":scope.current_day="Wednesday";break;case"thu":scope.current_day="Thursday";break;case"fri":scope.current_day="Friday";break;case"sat":scope.current_day="Saturday";break;case"sun":scope.current_day="Sunday"}var myEl=angular.element(document.querySelector(".timerpopup"));myEl.attr("day")?checkbox.checked||(scope.showPopover=!1,myEl.removeAttr("day")):(myEl.attr("day",day),scope.showPopover=!0,checkbox.checked||(scope.showPopover=!1,angular.forEach(scope.locationSchedule,function(value){value.day!=myEl.attr("day")&&locations.push(value)}),scope.locationSchedule=locations,locations=[],myEl.removeAttr("day")))},scope.showHover=function($event,pos,day){switch(scope.error_directive="",day){case"mon":scope.current_day="Monday";break;case"tue":scope.current_day="Tuesday";break;case"wed":scope.current_day="Wednesday";break;case"thu":scope.current_day="Thursday";break;case"fri":scope.current_day="Friday";break;case"sat":scope.current_day="Saturday";break;case"sun":scope.current_day="Sunday"}var checkbox=$event.target,myEl=angular.element(document.querySelector(".timerpopup"));myEl.attr("day")||(scope.showPopover=!0,angular.forEach(scope.locationSchedule,function(value){value.day==day&&(scope.from=parseInt(value.startTime.slice(0,-2)),scope.from_type=value.startTime.slice(-2),scope.to=parseInt(value.endTime.slice(0,-2)),scope.to_type=value.endTime.slice(-2))}),checkbox.checked||(scope.from=9,scope.from_type="AM",scope.to=5,scope.to_type="PM"))},scope.closePop=function(obj){scope.error_directive="";var myEl=angular.element(document.querySelector(".timerpopup"));if(myEl.attr("day"))if(obj&&"close"==obj){switch(scope.showPopover=!1,myEl.attr("day")){case"mon":scope.mon=!1;break;case"tue":scope.tue=!1;break;case"wed":scope.wed=!1;break;case"thu":scope.thu=!1;break;case"fri":scope.fri=!1;break;case"sat":scope.sat=!1;break;case"sun":scope.sun=!1}myEl.removeAttr("day")}else scope.showPopover=!0;else scope.showPopover=!1,myEl.removeAttr("day")},scope.save_time=function(){var myEl=angular.element(document.querySelector(".timerpopup")),data={endTime:scope.to+scope.to_type,startTime:scope.from+scope.from_type,day:myEl.attr("day")};return""==scope.to?void(scope.error_directive="Please select to & from time"):""==scope.from?void(scope.error_directive="Please select to & from time"):scope.from<1||scope.from>12?void(scope.error_directive="Time should be between 1 to 12"):scope.to<1||scope.to>12?void(scope.error_directive="Time should be between 1 to 12"):""==scope.from_type?void(scope.error_directive="Please select AM or PM for FROM"):""==scope.to_type?void(scope.error_directive="Please select AM or PM for TO"):(scope.error_directive="",scope.all?(scope.locationSchedule=[],scope.locationSchedule.push({endTime:scope.to+scope.to_type,startTime:scope.from+scope.from_type,day:myEl.attr("day")}),"mon"!=myEl.attr("day")&&(scope.locationSchedule.push({endTime:scope.to+scope.to_type,startTime:scope.from+scope.from_type,day:"mon"}),scope.mon=!0),"tue"!=myEl.attr("day")&&(scope.locationSchedule.push({endTime:scope.to+scope.to_type,startTime:scope.from+scope.from_type,day:"tue"}),scope.tue=!0),"wed"!=myEl.attr("day")&&(scope.locationSchedule.push({endTime:scope.to+scope.to_type,startTime:scope.from+scope.from_type,day:"wed"}),scope.wed=!0),"thu"!=myEl.attr("day")&&(scope.locationSchedule.push({endTime:scope.to+scope.to_type,startTime:scope.from+scope.from_type,day:"thu"}),scope.thu=!0),"fri"!=myEl.attr("day")&&(scope.locationSchedule.push({endTime:scope.to+scope.to_type,startTime:scope.from+scope.from_type,day:"fri"}),scope.fri=!0),"sat"!=myEl.attr("day")&&(scope.locationSchedule.push({endTime:scope.to+scope.to_type,startTime:scope.from+scope.from_type,day:"sat"}),scope.sat=!0),"sun"!=myEl.attr("day")&&(scope.locationSchedule.push({endTime:scope.to+scope.to_type,startTime:scope.from+scope.from_type,day:"sun"}),scope.sun=!0),scope.all=!1):scope.locationSchedule.push(data),myEl.removeAttr("day"),scope.flag=!1,scope.showPopover=!1,scope.from_type="",scope.to="",void(scope.to_type=""))}}}}),angular.module("outingzApp").directive("timePickAdvance",["$compile","$timeout",function($compile,$timeout){return{restrict:"E",templateUrl:"../../views/timePickerAdvance.html?"+Math.random(),link:function(scope){scope.error_directive="",scope.locationSchedule=[];var locations=[],myEl=angular.element(document.querySelector(".timerpopup"));scope.showPopover=!1,scope.flag=!1,scope.from=9,scope.to=5,scope.period=["PM","AM"],scope.current_slot=[];var days_pos=angular.element(document.querySelector("#days_group")),time_pos=angular.element(document.querySelector(".outertimeInfo")),offset=days_pos.offset(),offset=(days_pos.offset(),days_pos.offset());scope.disb=function(day){var myEl=angular.element(document.querySelector(".timerpopup"));return myEl.attr("day")&&myEl.attr("day")==day?!1:myEl.attr("day")?!0:void 0},scope.all_days=function(){scope.all},scope.current_day="",scope.showPop=function($event,pos,day){scope.error_directive="";var checkbox=$event.target;switch(day){case"mon":scope.current_day="Monday";break;case"tue":scope.current_day="Tuesday";break;case"wed":scope.current_day="Wednesday";break;case"thu":scope.current_day="Thursday";break;case"fri":scope.current_day="Friday";break;case"sat":scope.current_day="Saturday";break;case"sun":scope.current_day="Sunday"}var myEl=angular.element(document.querySelector(".timerpopup"));myEl.attr("day")?checkbox.checked||(scope.showPopover=!1,myEl.removeAttr("day")):(myEl.attr("day",day),scope.showPopover=!0,checkbox.checked?(scope.current_slot.length<1&&scope.current_slot.push({from:9,from_type:"AM",to:5,to_type:"PM"}),$timeout(function(){console.log(offset.top),console.log(offset.top-time_pos.outerHeight()),myEl.css("top",-(time_pos.outerHeight()+100)+"px")},0)):(scope.showPopover=!1,scope.current_slot=[],angular.forEach(scope.locationSchedule,function(value){value.day!=myEl.attr("day")&&locations.push(value)}),scope.locationSchedule=locations,locations=[],myEl.removeAttr("day"))),console.log(JSON.stringify(scope.locationSchedule))},scope.showHover=function($event,pos,day){switch(scope.error_directive="",day){case"mon":scope.current_day="Monday";break;case"tue":scope.current_day="Tuesday";break;case"wed":scope.current_day="Wednesday";break;case"thu":scope.current_day="Thursday";break;case"fri":scope.current_day="Friday";break;case"sat":scope.current_day="Saturday";break;case"sun":scope.current_day="Sunday"}var checkbox=$event.target,myEl=angular.element(document.querySelector(".timerpopup"));myEl.attr("day")||(scope.current_slot=[],scope.showPopover=!0,angular.forEach(scope.locationSchedule,function(value){value.day==day&&angular.forEach(value.time,function(value){scope.current_slot.push({from:value.startTime.slice(0,-2),from_type:value.startTime.slice(-2),to:value.endTime.slice(0,-2),to_type:value.endTime.slice(-2)}),$timeout(function(){console.log(offset.top),console.log(offset.top-time_pos.outerHeight()),myEl.css("top",-(time_pos.outerHeight()+100)+"px")},0)})}),checkbox.checked||scope.current_slot.length<1&&(scope.current_slot.push({from:9,from_type:"AM",to:5,to_type:"PM"}),$timeout(function(){console.log(offset.top),console.log(offset.top-time_pos.outerHeight()),myEl.css("top",-(time_pos.outerHeight()+100)+"px")},0)))},scope.closePop=function(obj){scope.error_directive="";var myEl=angular.element(document.querySelector(".timerpopup"));if(myEl.attr("day"))if(obj&&"close"==obj){switch(scope.showPopover=!1,myEl.attr("day")){case"mon":scope.mon=!1;break;case"tue":scope.tue=!1;break;case"wed":scope.wed=!1;break;case"thu":scope.thu=!1;break;case"fri":scope.fri=!1;break;case"sat":scope.sat=!1;break;case"sun":scope.sun=!1}myEl.removeAttr("day")}else scope.showPopover=!0;else scope.current_slot=[],scope.showPopover=!1,myEl.removeAttr("day")},scope.save_time=function(){var myEl=angular.element(document.querySelector(".timerpopup")),data={time:[],day:myEl.attr("day")};if(angular.forEach(scope.current_slot,function(value){var timeObj={startTime:value.from+value.from_type,endTime:value.to+value.to_type};data.time.push(timeObj)}),scope.all){scope.locationSchedule=[];var data={time:[],day:myEl.attr("day")};if(angular.forEach(scope.current_slot,function(value){var timeObj={startTime:value.from+value.from_type,endTime:value.to+value.to_type};data.time.push(timeObj)}),scope.locationSchedule.push(data),"mon"!=myEl.attr("day")){var data={time:[],day:"mon"};angular.forEach(scope.current_slot,function(value){var timeObj={startTime:value.from+value.from_type,endTime:value.to+value.to_type};data.time.push(timeObj)}),scope.locationSchedule.push(data),scope.mon=!0}if("tue"!=myEl.attr("day")){var data={time:[],day:"tue"};angular.forEach(scope.current_slot,function(value){var timeObj={startTime:value.from+value.from_type,endTime:value.to+value.to_type};data.time.push(timeObj)}),scope.locationSchedule.push(data),scope.tue=!0}if("wed"!=myEl.attr("day")){var data={time:[],day:"wed"};angular.forEach(scope.current_slot,function(value){var timeObj={startTime:value.from+value.from_type,endTime:value.to+value.to_type};data.time.push(timeObj)}),scope.locationSchedule.push(data),scope.wed=!0}if("thu"!=myEl.attr("day")){var data={time:[],day:"thu"};angular.forEach(scope.current_slot,function(value){var timeObj={startTime:value.from+value.from_type,endTime:value.to+value.to_type};data.time.push(timeObj)}),scope.locationSchedule.push(data),scope.thu=!0}if("fri"!=myEl.attr("day")){var data={time:[],day:"fri"};angular.forEach(scope.current_slot,function(value){var timeObj={startTime:value.from+value.from_type,endTime:value.to+value.to_type};data.time.push(timeObj)}),scope.locationSchedule.push(data),scope.fri=!0}if("sat"!=myEl.attr("day")){var data={time:[],day:"sat"};angular.forEach(scope.current_slot,function(value){var timeObj={startTime:value.from+value.from_type,endTime:value.to+value.to_type};data.time.push(timeObj)}),scope.locationSchedule.push(data),scope.sat=!0}if("sun"!=myEl.attr("day")){var data={time:[],day:"sun"};angular.forEach(scope.current_slot,function(value){var timeObj={startTime:value.from+value.from_type,endTime:value.to+value.to_type};data.time.push(timeObj)}),scope.locationSchedule.push(data),scope.sun=!0}scope.all=!1}else scope.locationSchedule.push(data);console.log(JSON.stringify(scope.locationSchedule)),myEl.removeAttr("day"),$timeout(function(){myEl.css("top","0px")},0),scope.flag=!1,scope.showPopover=!1,scope.from_type="",scope.to="",scope.to_type=""},scope.test=function(){alert("inside test")},scope.add_slot=function(){scope.current_slot.push({from:9,from_type:"AM",to:5,to_type:"PM"}),$timeout(function(){console.log(offset.top),console.log(offset.top-time_pos.outerHeight()),myEl.css("top",-(time_pos.outerHeight()+100)+"px")},0)}}}}]);