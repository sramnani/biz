"use strict";angular.module("outingzApp",["ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/dashboard.html"}).when("/merchant",{templateUrl:"views/merchant.html",controller:"MerchantCtrl",resolve:{authenticated:["$q","$location","UserService",function(a,b,c){var d=a.defer();return c.isAuthenticated()?d.resolve():b.path("/login"),d.promise}]}}).when("/location",{templateUrl:"views/location.html",controller:"MerchantCtrl",resolve:{authenticated:["$q","$location","UserService",function(a,b,c){var d=a.defer();return c.isAuthenticated()?d.resolve():b.path("/login"),d.promise}]}}).when("/activity_service",{templateUrl:"views/activity_service.html",controller:"ServiceCtrl",resolve:{authenticated:["$q","$location","UserService",function(a,b,c){var d=a.defer();return c.isAuthenticated()?d.resolve():b.path("/login"),d.promise}]}}).when("/reset_password/:resetPassword/:key/:username/:token*",{templateUrl:"views/reset-password.html",controller:"userCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"userCtrl"}).when("/logout",{templateUrl:"views/login.html",controller:"userCtrl"}).when("/register",{templateUrl:"views/register.html",controller:"userCtrl"}).otherwise({redirectTo:"/"})}]).controller("GreetingController",["$scope",function(a){a.greeting="Hola!"}]),angular.module("outingzApp").controller("MerchantCtrl",["$scope","MerchantService","$q","$http","$routeParams","$location",function(a,b,c,d,e,f){a.merchant={},a.create_merchant=function(a,c){c&&(alert("our form is amazing"),b.add_merchant(a).then(function(){console.log("merchant added successfully")},function(){console.log("There is an error occured")}))},a.location={},a.locations=[],a.add_merchant_location=function(c){c.address.state="",c.address.country="",c.address.line2="",b.add_merchant_location(c).then(function(){a.locations.push(c)},function(a){console.log("There is an error"+a)})},"/location"==f.url()&&b.get_merchant_locations().then(function(b){a.locations=b.location},function(a){console.log("There is an error"+a)}),a.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"]}]),angular.module("outingzApp").controller("ServiceCtrl",["$scope","ActivityService","$q","$http",function(a,b){a.activity_service={},a.add_activity_service=function(c){var c={};c.offering={},c.offering.name=a.name,c.offering.duration=a.duration,c.offering.unit=a.unit,c.offering.basePrice=a.basePrice,c.offering.type=a.type,b.add_activity_service(c).then(function(){console.log("Activity service added successfully")},function(a){console.log("There is an error"+a)})},a.register=function(){b.register().then(function(){console.log("Activity service added successfully")},function(a){console.log("There is an error"+a)})}}]),angular.module("outingzApp").controller("userCtrl",["$scope","$q","$http","$routeParams","$location","$window","UserService",function(a,b,c,d,e,f,g){a.password="",a.success="",a.error="",a.register=function(){var b={};b.id="id"+Math.floor(9999999999*Math.random()+1),b.shortName=a.name,b.primaryUserName=a.primaryUserName,g.register(b).then(function(b){console.log(JSON.stringify(b)),500==b.status?a.error="Error in registeration":b.id?a.success="Registeration successfull , Please activate your account from your email":a.error="Error while registeration!"},function(a){console.log("There is an error"+a)})},a.login=function(){var b={};b.username=a.username,b.password=a.password,g.login(b).then(function(b){console.log(JSON.stringify(b)),500==b.status?a.error="Wrong username & password":(f.localStorage.token=b.data.token,f.localStorage.key=b.data.key,e.url("/merchant"))},function(a){console.log("There is an error"+a)})},a.reset_password=function(){var b={};b.user=d.username,b.key=d.key,b.password=a.password,g.reset_password(b).then(function(){a.success="Your password reset successfully",console.log("Your password reset successfully")},function(a){console.log("There is an error"+a)})}}]).controller("NavbarCtrl",["$scope","$q","$http","$routeParams","$location","$window","UserService",function(a,b,c,d,e,f,g){a.isAuthenticated=function(){return g.isAuthenticated()},a.logout=function(){delete f.localStorage.token,delete f.localStorage.key,e.url("/login")}}]),angular.module("outingzApp").factory("MerchantService",["$http","$q",function(a,b){return{add_merchant:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/merchants",c).success(function(a){d.resolve(a)}).error(function(){d.reject("An error occured while fetching items")}),d.promise},add_merchant_location:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/merchants/098150df-d65f-4577-b4ce-474ecced5673/locations",c).success(function(a){d.resolve(a)}).error(function(){d.reject("An error occured while fetching items")}),d.promise},get_merchant_locations:function(){var c=b.defer();return a.get("https://api.outingz.com/outingz/merchants/098150df-d65f-4577-b4ce-474ecced5673/locations").success(function(a){c.resolve(a)}).error(function(){c.reject("An error occured while fetching items")}),c.promise}}}]),angular.module("outingzApp").factory("ActivityService",["$http","$q",function(a,b){return{add_activity_service:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/merchants/098150df-d65f-4577-b4ce-474ecced5673/services",c).success(function(a){d.resolve(a)}).error(function(){d.reject("An error occured while fetching items")}),d.promise},register:function(){var c=b.defer();return obj={},obj.id="id5941",obj.name="varun",obj.shortName="vipy",obj.primaryUserName="varunprashar5@gmail.com",obj.dba="vhelo",obj.companyUrl="companyUrl",a.post("https://api.outingz.com/outingz/registration",obj).success(function(a){c.resolve(a)}).error(function(){c.reject("An error occured while fetching items")}),c.promise}}}]),angular.module("outingzApp").factory("UserService",["$http","$q","$window",function(a,b,c){return{reset_password:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/authenticate/resetLogin",c).success(function(a){d.resolve(a)}).error(function(){d.reject("An error occured while fetching items")}),d.promise},login:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/authenticate",c).success(function(a,b){d.resolve({data:a,status:b})}).error(function(){d.reject("An error occured while fetching items")}),d.promise},register:function(c){var d=b.defer();return a.post("https://api.outingz.com/outingz/registration",c).success(function(a){d.resolve(a)}).error(function(){d.reject("An error occured while fetching items")}),d.promise},isAuthenticated:function(){var a=c.localStorage.token,b=c.localStorage.key;return a&&b?!0:!1}}}]),angular.module("outingzApp").directive("validPasswordC",function(){return{require:"ngModel",scope:{otherModelValue:"=validPasswordC"},link:function(a,b,c,d){d.$validators.compareTo=function(b){return b==a.otherModelValue},a.$watch("otherModelValue",function(){d.$validate()})}}});